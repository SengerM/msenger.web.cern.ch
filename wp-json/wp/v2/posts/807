{"id":807,"date":"2021-12-30T11:10:02","date_gmt":"2021-12-30T11:10:02","guid":{"rendered":"https:\/\/msenger.web.cern.ch\/?p=807"},"modified":"2021-12-30T11:10:02","modified_gmt":"2021-12-30T11:10:02","slug":"making-a-temperature-controller-with-python","status":"publish","type":"post","link":"https:\/\/msenger.web.cern.ch\/making-a-temperature-controller-with-python\/","title":{"rendered":"Making a temperature controller with Python"},"content":{"rendered":"\n<p>Controlling the temperature of something is a very common task to do in the lab, basically because almost everything is a function of temperature and you usually want to keep it stable at a known value. Currently I am working in measuring the TI-LGADs after irradiation, and for this they have to be cooled down to approximately -20 \u00b0C because otherwise the current blows up. That is why I implemented the &#8220;<a rel=\"noreferrer noopener\" href=\"https:\/\/msenger.web.cern.ch\/low-temperature-setup-for-the-tct\/\" data-type=\"URL\" data-id=\"https:\/\/msenger.web.cern.ch\/low-temperature-setup-for-the-tct\/\" target=\"_blank\">low temperature system for the TCT setup<\/a>&#8220;. The system works fine and is capable of reaching the desired temperature, but without a controller there is not much precision in the temperature, and it is subjected to fluctuations. To ease my life and improve the quality of the results I decided to implement a temperature controller which automatically adjusts the current flowing through the Peltier cells such that the temperature is stabilized at the desired value.<\/p>\n\n\n\n<p>Usually these controllers can be just bought, but since I had all the required elements in the lab to implement one on my own, I decided to go this way. The only extra thing I had to do is to connect the DC power supply (powering the Peltier cells) using a USB cable to the computer, and write the software. Establishing the communication between the computer and the power supply was the most complicated part, but that&#8217;s another story. Once this communication was working, I decided to try with the engineer&#8217;s workhorse when something has to be automatically controlled, a <a rel=\"noreferrer noopener\" href=\"https:\/\/en.wikipedia.org\/wiki\/PID_controller\" data-type=\"URL\" data-id=\"https:\/\/en.wikipedia.org\/wiki\/PID_controller\" target=\"_blank\">PID controller<\/a>. Python is so vast that there is a PID module awaiting to be imported, the <a rel=\"noreferrer noopener\" href=\"https:\/\/pypi.org\/project\/simple-pid\/\" data-type=\"URL\" data-id=\"https:\/\/pypi.org\/project\/simple-pid\/\" target=\"_blank\">simple-pid package<\/a>. So all I had to do is import this package, tune the PID constants for a while, and voil\u00e0, the controller was working. The current version of the software that controls the temperature in the TCT setup can be found <a rel=\"noreferrer noopener\" href=\"https:\/\/github.com\/SengerM\/tct_scripts\/blob\/5c0806229609b75e4b04576152916a5c6d1835aa\/temperature_controller.py\" target=\"_blank\">here<\/a>, it is more than just importing the PID package but that&#8217;s for having it running as a daemon in the background, automatically reporting parameters to my mobile (in case something goes wrong) and at the same time allowing control from any other Python script (for example the scripts that will actually measure the TI-LGADs).<\/p>\n\n\n\n<p>I have to say that I am surprised on how well the controller performs. Below there is a plot showing the set-temperature and the measured-temperature while I was doing some testing. We can see that it stabilizes in about 3 minutes and the temperature has fluctuation of less than 0.05 \u00b0C once it stabilizes. This is far better than what I need for this application, so nice \ud83d\ude01.<\/p>\n\n\n\n<iframe style=\"width: 100%; height: 500px; min-width: 1000px;\" src=\"https:\/\/msenger.web.cern.ch\/wp-content\/uploads\/2021\/12\/temperature_controller.html\"><\/iframe>\n\n\n\n<p>The &#8220;measured temperature&#8221; is the temperature measured by a sensor that is less than one centimeter from the TI-LGAD in the readout board, you can see it in the picture below it is the small black chip next to the gold pad where the TI-LGAD is mounted.<\/p>\n\n\n\n<figure class=\"wp-block-image size-full is-resized\"><img loading=\"lazy\" decoding=\"async\" src=\"https:\/\/msenger.web.cern.ch\/wp-content\/uploads\/2021\/11\/photo_2021-11-26_23-06-38.jpg\" alt=\"\" class=\"wp-image-792\" width=\"345\" height=\"325\" srcset=\"https:\/\/msenger.web.cern.ch\/wp-content\/uploads\/2021\/11\/photo_2021-11-26_23-06-38.jpg 764w, https:\/\/msenger.web.cern.ch\/wp-content\/uploads\/2021\/11\/photo_2021-11-26_23-06-38-300x284.jpg 300w\" sizes=\"(max-width: 345px) 100vw, 345px\" \/><\/figure>\n","protected":false},"excerpt":{"rendered":"<p>Controlling the temperature of something is a very common task to do in the lab, basically because almost everything is a function of temperature and you usually want to keep it stable at a known value. Currently I am working in measuring the TI-LGADs after irradiation, and for this they have to be cooled down &hellip;<\/p>\n<p class=\"read-more\"> <a class=\"\" href=\"https:\/\/msenger.web.cern.ch\/making-a-temperature-controller-with-python\/\"> <span class=\"screen-reader-text\">Making a temperature controller with Python<\/span> Read More &raquo;<\/a><\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"closed","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"inline_featured_image":false,"footnotes":""},"categories":[1],"tags":[4,26],"_links":{"self":[{"href":"https:\/\/msenger.web.cern.ch\/wp-json\/wp\/v2\/posts\/807"}],"collection":[{"href":"https:\/\/msenger.web.cern.ch\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/msenger.web.cern.ch\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/msenger.web.cern.ch\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/msenger.web.cern.ch\/wp-json\/wp\/v2\/comments?post=807"}],"version-history":[{"count":8,"href":"https:\/\/msenger.web.cern.ch\/wp-json\/wp\/v2\/posts\/807\/revisions"}],"predecessor-version":[{"id":816,"href":"https:\/\/msenger.web.cern.ch\/wp-json\/wp\/v2\/posts\/807\/revisions\/816"}],"wp:attachment":[{"href":"https:\/\/msenger.web.cern.ch\/wp-json\/wp\/v2\/media?parent=807"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/msenger.web.cern.ch\/wp-json\/wp\/v2\/categories?post=807"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/msenger.web.cern.ch\/wp-json\/wp\/v2\/tags?post=807"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}